<!DOCTYPE html>
<html>
<head>
<!-- <meta charset="utf-8"http-equiv="Access-Control-Allow-Origin" content="*"> -->
<meta charset="utf-8">
<!-- 包含头部信息用于适应不同设备 -->
<meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
<!-- 包含 bootstrap 样式表 -->
<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!-- css -->
<link rel="stylesheet" type="text/css" href="main.css">

<title>云云的crrt</title>
</head>

<body class="htmlBody">
<script type="text/javascript">
    var NaCl = 153.8;
    var NaHCO3 = 595;
    var KCl = 1342;
    var MgSO4 = 2083;
    var CaCl2 = 450.5;
    var Sugar = 277.8;
    var totleVum = parseFloat("0");
    var reg = /^\d+(\.\d+)?$/;
    var inputs = new Array(7);
    var outputs = new Array(7);
</script>


<script>
    function handle() {
      totleVum = 0;
      inputs[0] = document.getElementById("cNaCl").value;
      inputs[1] = document.getElementById("cNaHCO3").value;
      inputs[2] = document.getElementById("cKCl").value;
      inputs[3] = document.getElementById("cMgSO4").value;
      inputs[4] = document.getElementById("cCaCl2").value;
      inputs[5] = document.getElementById("cSugar").value;
      inputs[6] = document.getElementById("water").value;
      
      for (var i =0 ;i < inputs.length; i++) {
        if (inputs[i]=="") {
          inputs[i] = 0;
          continue;
        }
        if(reg.test(inputs[i])==true){
          inputs[i] = parseFloat(inputs[i]);
        }else{
          alert("请输入数字，不要出现其他字符哦！");
          clearOutPut();
          return false;
        }
      }

      for (var i = 0; i < inputs.length; i++) {
        totleVum += inputs[i];
      }
      if (totleVum>0) {
        outputs[0] = (NaCl*inputs[0]+NaHCO3*inputs[1])/totleVum; //Na+
        outputs[1] = NaHCO3*inputs[1]/totleVum;   //HCO3-
        outputs[2] = KCl*inputs[2]/totleVum;    //K+
        outputs[3] = MgSO4*inputs[3]/totleVum;    //Mg2+
        outputs[4] = CaCl2*inputs[4]/totleVum;    //Ca2+
      }else{
        for (var i = 0; i < outputs.length; i++) {
          outputs[i] = 0;
        }
      }
      updateData();
    }

    function clearOutPut(){
      for (var i = 0; i < outputs.length; i++) {
          outputs[i] = 0;
        }
    }

    function initInputs(){
      for (var i =0 ;i < inputs.length; i++) {
        if (inputs[i]=="") {
          inputs[i] = 0;
          return true;
        }
        if(reg.test(inputs[i])==true){
          return true;
        }else{
          alert("请输入数字，不要出现其他字符哦！");
          return false;
        }
      }
    
  }

  function updateData(){
    document.getElementById("table1").style.visibility="visible";
    document.getElementById("Na+").innerHTML  = outputs[0].toFixed(2);
    document.getElementById("K+").innerHTML  = outputs[2].toFixed(2);
    document.getElementById("Ca2+").innerHTML  = outputs[4].toFixed(2);
    document.getElementById("Mg2+").innerHTML  = outputs[3].toFixed(2);
    document.getElementById("HCO3-").innerHTML  = outputs[1].toFixed(2);
  }
</script>

<h1 align="center" class="header">请吧，大人^_^</h1>
<hr/>

<div class="panels">
	<div class="inputs">
	  <div class="form-inline">
	    <label class="lablename" >0.9%生理盐水:</label> 
	    <input type="text" value="" class="form-control" placeholder="女王请输入" id="cNaCl">
	  </div>

	  <div class="form-inline">
	    <label class="lablename">5%碳酸氢钠:</label>
	    <input type="text" value="" class="form-control" placeholder="女王请输入" id="cNaHCO3">
	  </div>

	  <div class="form-inline">
	    <label class="lablename">10%氯化钾:</label>
	    <input type="text" value="" class="form-control" placeholder="女王请输入" id="cKCl">
	  </div>

	  <div class="form-inline">
	    <label class="lablename">25%硫酸镁:</label>
	    <input type="text" value="" class="form-control" placeholder="女王请输入" id="cMgSO4">
	  </div>

	  <div class="form-inline">
	    <label class="lablename">5%氯化钙:</label>
	    <input type="text" value="" class="form-control" placeholder="女王请输入" id="cCaCl2">
	  </div>

	  <div class="form-inline">
	    <label class="lablename">5%葡萄糖:</label>
	    <input type="text" value="" class="form-control" placeholder="女王请输入" id="cSugar">
	  </div>

	  <div class="form-inline">
	    <label class="lablename">灭菌用水:</label>
	    <input type="text" value="" class="form-control" placeholder="女王请输入" id="water">
	  </div>

	  <div class="form-inline">
	    <button type="button" class="btn btn-success" id="button1" onclick="handle()">确认</button>
	  </div>
	</div>
 </div>

<div class="result">
  <table style="visibility: hidden;"  id="table1">
    <thead>
     <tr>
      <th >离子浓度</th>
      <th >数值</th>
      <th >单位</th>
     </tr>
   </thead>
    <tr>
      <td>Na+</td>
      <td id="Na+"></td>
      <td>mmol/L</td>
    </tr>

    <tr>
      <td>K+</td>
      <td id="K+"></td>
      <td>mmol/L</td>
    </tr>

    <tr>
      <td>Mg2+</td>
      <td id="Mg2+"></td>
      <td>mmol/L</td>
    </tr>

    <tr>
      <td>Ca2+</td>
      <td id="Ca2+"></td>
      <td>mmol/L</td>
    </tr>

    <tr>
      <td>HCO3-</td>
      <td id="HCO3-"></td>
      <td>mmol/L</td>
    </tr>

  </table>
</div>

</body>
</html>